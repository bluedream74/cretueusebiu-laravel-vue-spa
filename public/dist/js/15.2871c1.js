(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{232:function(n,t,e){var a=e(346);"string"==typeof a&&(a=[[n.i,a,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};e(8)(a,i);a.locals&&(n.exports=a.locals)},257:function(n,t,e){var a=e(396);"string"==typeof a&&(a=[[n.i,a,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};e(8)(a,i);a.locals&&(n.exports=a.locals)},345:function(n,t,e){"use strict";e(232)},346:function(n,t,e){(n.exports=e(7)(!1)).push([n.i,'.spinner_container[data-v-f26607e4] {\n  position: fixed;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 10000;\n  background-color: rgba(216, 191, 216, 0.6);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.spinner_container .lds-roller[data-v-f26607e4] {\n  position: relative;\n  z-index: 10001;\n}\n.lds-roller[data-v-f26607e4] {\n  display: inline-block;\n  position: relative;\n  width: 80px;\n  height: 80px;\n}\n.lds-roller div[data-v-f26607e4] {\n  -webkit-animation: lds-roller-data-v-f26607e4 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;\n          animation: lds-roller-data-v-f26607e4 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;\n  transform-origin: 40px 40px;\n}\n.lds-roller div[data-v-f26607e4]:after {\n  content: " ";\n  display: block;\n  position: absolute;\n  width: 7px;\n  height: 7px;\n  border-radius: 50%;\n  background: #fff;\n  margin: -4px 0 0 -4px;\n}\n.lds-roller div[data-v-f26607e4]:nth-child(1) {\n  -webkit-animation-delay: -0.036s;\n          animation-delay: -0.036s;\n}\n.lds-roller div[data-v-f26607e4]:nth-child(1):after {\n  top: 63px;\n  left: 63px;\n}\n.lds-roller div[data-v-f26607e4]:nth-child(2) {\n  -webkit-animation-delay: -0.072s;\n          animation-delay: -0.072s;\n}\n.lds-roller div[data-v-f26607e4]:nth-child(2):after {\n  top: 68px;\n  left: 56px;\n}\n.lds-roller div[data-v-f26607e4]:nth-child(3) {\n  -webkit-animation-delay: -0.108s;\n          animation-delay: -0.108s;\n}\n.lds-roller div[data-v-f26607e4]:nth-child(3):after {\n  top: 71px;\n  left: 48px;\n}\n.lds-roller div[data-v-f26607e4]:nth-child(4) {\n  -webkit-animation-delay: -0.144s;\n          animation-delay: -0.144s;\n}\n.lds-roller div[data-v-f26607e4]:nth-child(4):after {\n  top: 72px;\n  left: 40px;\n}\n.lds-roller div[data-v-f26607e4]:nth-child(5) {\n  -webkit-animation-delay: -0.18s;\n          animation-delay: -0.18s;\n}\n.lds-roller div[data-v-f26607e4]:nth-child(5):after {\n  top: 71px;\n  left: 32px;\n}\n.lds-roller div[data-v-f26607e4]:nth-child(6) {\n  -webkit-animation-delay: -0.216s;\n          animation-delay: -0.216s;\n}\n.lds-roller div[data-v-f26607e4]:nth-child(6):after {\n  top: 68px;\n  left: 24px;\n}\n.lds-roller div[data-v-f26607e4]:nth-child(7) {\n  -webkit-animation-delay: -0.252s;\n          animation-delay: -0.252s;\n}\n.lds-roller div[data-v-f26607e4]:nth-child(7):after {\n  top: 63px;\n  left: 17px;\n}\n.lds-roller div[data-v-f26607e4]:nth-child(8) {\n  -webkit-animation-delay: -0.288s;\n          animation-delay: -0.288s;\n}\n.lds-roller div[data-v-f26607e4]:nth-child(8):after {\n  top: 56px;\n  left: 12px;\n}\n@-webkit-keyframes lds-roller-data-v-f26607e4 {\n0% {\n    transform: rotate(0deg);\n}\n100% {\n    transform: rotate(360deg);\n}\n}\n@keyframes lds-roller-data-v-f26607e4 {\n0% {\n    transform: rotate(0deg);\n}\n100% {\n    transform: rotate(360deg);\n}\n}',""])},37:function(n,t,e){"use strict";e(345);var a=e(4),i=Object(a.a)({},(function(){var n=this.$createElement;this._self._c;return this._m(0)}),[function(){var n=this.$createElement,t=this._self._c||n;return t("div",{staticClass:"spinner_container"},[t("div",{staticClass:"lds-roller"},[t("div"),t("div"),t("div"),t("div"),t("div"),t("div"),t("div"),t("div")])])}],!1,null,"f26607e4",null);t.a=i.exports},395:function(n,t,e){"use strict";e(257)},396:function(n,t,e){(n.exports=e(7)(!1)).push([n.i,".payment__container[data-v-2b79e199] {\n  width: 600px;\n  margin-left: auto;\n  margin-right: auto;\n  padding-top: 30px;\n  padding-bottom: 60px;\n}\n@media screen and (max-width: 768px) {\n.payment__container[data-v-2b79e199] {\n    width: 90vw;\n    padding-top: 5vw;\n}\n}\n.payment__container .description[data-v-2b79e199] {\n  font-size: 14px;\n}\n@media screen and (max-width: 768px) {\n.payment__container .description[data-v-2b79e199] {\n    font-size: 3.5vw;\n}\n}\n.payment__container .description span[data-v-2b79e199] {\n  font-size: 15px;\n  color: #f09415;\n}\n@media screen and (max-width: 768px) {\n.payment__container .description span[data-v-2b79e199] {\n    font-size: 3.7vw;\n}\n}\n.actions[data-v-2b79e199] {\n  display: flex;\n  flex-direction: column;\n  padding-top: 20px;\n}\n@media screen and (max-width: 768px) {\n.actions[data-v-2b79e199] {\n    padding-top: 5vw;\n}\n}\n.actions button[data-v-2b79e199] {\n  margin-bottom: 15px;\n  border-radius: 5px;\n  border: 0;\n  width: 100%;\n  height: 32px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 14px;\n  background-color: #f09415;\n  color: #fff;\n}\n@media screen and (max-width: 768px) {\n.actions button[data-v-2b79e199] {\n    margin-bottom: 3vw;\n    border-radius: 1vw;\n    height: 8vw;\n    font-size: 3.5vw;\n}\n}\n.actions button[data-v-2b79e199]:nth-of-type(2) {\n  background-color: #ee9cff;\n  color: #fff;\n}\n.actions button[data-v-2b79e199]:nth-of-type(3) {\n  background-color: #7eb85e;\n  color: #fff;\n}\n.plan__item[data-v-2b79e199] {\n  margin-bottom: 40px;\n  padding-bottom: 30px;\n  border-bottom: 1px solid #5c4a3c;\n}\n.plan__item h3[data-v-2b79e199] {\n  font-size: 20px;\n  text-align: center;\n  color: #5c4a3c;\n  margin-bottom: 20px;\n}\n.plan__item h4[data-v-2b79e199] {\n  font-size: 20px;\n  text-align: center;\n  color: #333;\n  margin-bottom: 30px;\n}\n.plan__item h4 span[data-v-2b79e199] {\n  color: var(--main-color);\n  font-size: 26px;\n}\n.plan__item .action[data-v-2b79e199] {\n  padding-top: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.plan__item .action button[data-v-2b79e199] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 18px;\n  height: 60px;\n  width: 300px;\n  border: none;\n  background-color: var(--main-color);\n  color: #fff;\n}\n.mask[data-v-2b79e199] {\n  position: fixed;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(216, 191, 216, 0.6);\n  z-index: 200;\n}\n.card__modal[data-v-2b79e199] {\n  position: fixed;\n  width: 480px;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  background-color: #fff;\n  z-index: 300;\n  padding: 30px 20px;\n  border-radius: 10px;\n  max-height: 80vh;\n  overflow: auto;\n}\n@media screen and (max-width: 768px) {\n.card__modal[data-v-2b79e199] {\n    width: 90vw;\n    padding: 5vw;\n    border-radius: 2vw;\n}\n}\n.card__modal #card-button[data-v-2b79e199] {\n  margin-top: 30px;\n  margin-left: auto;\n  margin-right: auto;\n  background-color: var(--main-color);\n  color: #fff;\n  height: 40px;\n  padding-left: 30px;\n  padding-right: 30px;\n  border-radius: 5px;\n  border: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.card__modal .form__row[data-v-2b79e199] {\n  display: flex;\n  align-items: center;\n  margin-bottom: 20px;\n}\n.card__modal .form__row label[data-v-2b79e199] {\n  width: 140px;\n}\n.card__modal .form__row p input[data-v-2b79e199] {\n  width: 200px;\n  height: 30px;\n  border-radius: 5px;\n  border: 1px solid #777;\n  padding-left: 10px;\n  padding-right: 10px;\n}\n.btn_group[data-v-2b79e199] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding-top: 20px;\n  flex-direction: column;\n}\n.btn_group button[data-v-2b79e199]:last-of-type {\n  margin-top: 30px;\n  margin-left: auto;\n  margin-right: auto;\n  background-color: #777;\n  color: #fff;\n  height: 40px;\n  margin-top: 10px;\n  padding-left: 20px;\n  padding-right: 20px;\n  border-radius: 5px;\n  border: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.status[data-v-2b79e199] {\n  text-align: center;\n  margin-bottom: 20px;\n  font-size: 16px;\n  color: var(--main-color);\n}\n.back_btn[data-v-2b79e199] {\n  padding-top: 20px;\n  display: flex;\n  justify-content: center;\n}\n.back_btn button[data-v-2b79e199] {\n  padding-left: 30px;\n  padding-right: 30px;\n  height: 40px;\n  border-radius: 5px;\n  border: 0;\n  display: flex;\n  background-color: var(--main-color);\n  align-items: center;\n  justify-content: center;\n  color: #fff;\n}\n@media screen and (max-width: 768px) {\n.back_btn button[data-v-2b79e199] {\n    padding-left: 6vw;\n    padding-right: 6vw;\n    height: 10vw;\n    border-radius: 1vw;\n}\n}",""])},74:function(n,t,e){"use strict";e.r(t);var a=e(1),i=e.n(a),r=e(2),o=e.n(r);function d(n,t,e,a,i,r,o){try{var d=n[r](o),s=d.value}catch(n){return void e(n)}d.done?t(s):Promise.resolve(s).then(a,i)}function s(n){return function(){var t=this,e=arguments;return new Promise((function(a,i){var r=n.apply(t,e);function o(n){d(r,a,i,o,s,"next",n)}function s(n){d(r,a,i,o,s,"throw",n)}o(void 0)}))}}var l={mounted:function(){this.init()},components:{Spinner:e(37).a},data:function(){return{intent:null,showModal:!1,currentPlan:0,subscription:null,isLoading:!1}},methods:{clickMask:function(){this.showModal=!1},closeModal:function(){this.showModal=!1},upgrade:function(n){2!=this.$store.getters["auth/user"].role?(this.currentPlan=n,this.showModal=!0):this.$swal("","既に登録ずみです")},calcUpdateDate:function(){if(this.subscription){var n=this.subscription.updated_at;return 1==this.$store.getters["auth/user"].plan?o()(n).add(1,"months").format("MM月DD日"):o()(n).add(3,"months").format("MM月DD日")}return""},back:function(){this.$router.back()},savePaymentMethod:function(n){var t=this;return s(i.a.mark((function e(){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,axios.post("/api/save_payment_method",{payment_method:n,currentPlan:t.currentPlan});case 3:if(a=e.sent,!a.data.flag){e.next=10;break}return t.$swal("","有料会員登録が完了しました。"),t.showModal=!1,e.next=10,t.$store.dispatch("auth/fetchUser");case 10:e.next=14;break;case 12:e.prev=12,e.t0=e.catch(0);case 14:case"end":return e.stop()}}),e,null,[[0,12]])})))()},init:function(){var n=this;return s(i.a.mark((function t(){var e,a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,axios.post("/api/get_plan_info");case 2:e=t.sent,a=e.data,n.intent=a.intent,n.subscription=a.subscription,setTimeout((function(){var t=Stripe("pk_live_51Kw2dhCFqxHSXgZ1cQ6BLerGB4IULFvhujFPChBhVKby52xeHrp87uzjkOkykbQMfhhJvwdeeQNZklWVmPonWhLV00LOcUj49V"),e=t.elements().create("card");e.mount("#card-element");var a=document.getElementById("card-holder-name"),r=document.getElementById("card-button"),o=r.dataset.secret;r.addEventListener("click",function(){var r=s(i.a.mark((function r(d){var s,l;return i.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return n.isLoading=!0,i.next=3,t.confirmCardSetup(o,{payment_method:{card:e,billing_details:{name:a.value}}});case 3:s=i.sent,l=s.setupIntent,s.error?n.isLoading=!1:(n.isLoading=!1,console.log(l,"_____setupIntent"),n.savePaymentMethod(l.payment_method));case 7:case"end":return i.stop()}}),r)})));return function(n){return r.apply(this,arguments)}}())}),300);case 7:case"end":return t.stop()}}),t)})))()}}},c=(e(395),e(4)),p=Object(c.a)(l,(function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"payment__container"},[e("div",{staticClass:"inner"},[2==n.$store.getters["auth/user"].role?e("div",{staticClass:"status"},[n._v("現在"+n._s(1==n.$store.getters["auth/user"].plan?"１":"３")+"ヶ月プランをご利用中です。"+n._s(n.calcUpdateDate())+"で自動更新されます。")]):n._e(),n._v(" "),e("div",{staticClass:"plan__item"},[e("h3",[n._v("1ヶ月プラン")]),n._v(" "),n._m(0),n._v(" "),n._m(1),n._v(" "),e("div",{staticClass:"action"},[e("button",{on:{click:function(t){return n.upgrade(1)}}},[n._v("1ヶ月プランに申し込む")])])]),n._v(" "),e("div",{staticClass:"plan__item"},[e("h3",[n._v("３ヶ月プラン")]),n._v(" "),n._m(2),n._v(" "),n._m(3),n._v(" "),e("div",{staticClass:"action"},[e("button",{on:{click:function(t){return n.upgrade(2)}}},[n._v("３ヶ月プランに申し込む")])])]),n._v(" "),e("div",{staticClass:"back_btn"},[e("button",{on:{click:n.back}},[n._v("戻る")])])]),n._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:n.showModal,expression:"showModal"}],staticClass:"mask",on:{click:n.clickMask}}),n._v(" "),n.intent?e("div",{directives:[{name:"show",rawName:"v-show",value:n.showModal,expression:"showModal"}],staticClass:"card__modal"},[n._m(4),n._v(" "),e("div",{attrs:{id:"card-element"}}),n._v(" "),e("div",{staticClass:"btn_group"},[e("button",{attrs:{id:"card-button","data-secret":n.intent.client_secret}},[n._v("\n        上記の内容で有料会員登録する\n      ")]),n._v(" "),e("button",{on:{click:n.closeModal}},[n._v("キャンセル")])])]):n._e(),n._v(" "),n.isLoading?e("Spinner"):n._e()],1)}),[function(){var n=this.$createElement,t=this._self._c||n;return t("h4",[t("span",[this._v("1,500円")]),this._v("（税抜）")])},function(){var n=this.$createElement,t=this._self._c||n;return t("div",{staticClass:"desc"},[this._v("\n        ※有料会員になった日から1ヶ月間の料金になります。"),t("br"),this._v("\n        ※自動更新になります。退会希望の場合は更新日前に退会する必要がございます。"),t("br"),this._v("\n        ※自動更新後はキャンセル不可になりますのでご注意ください。"),t("br"),this._v("\n        ※途中退会の場合の日割り払い戻しなども行なっておりません。\n      ")])},function(){var n=this.$createElement,t=this._self._c||n;return t("h4",[t("span",[this._v("4,000円")]),this._v("（税抜）")])},function(){var n=this.$createElement,t=this._self._c||n;return t("div",{staticClass:"desc"},[this._v("\n        ※有料会員になった日から３ヶ月間の料金になります。"),t("br"),this._v("\n        ※３ヶ月単位での自動更新になります。退会希望の場合は更新日前に退会する必要がございます。"),t("br"),this._v("\n        ※自動更新後はキャンセル不可になりますのでご注意ください。"),t("br"),this._v("\n        ※途中退会の場合の日割り払い戻しなども行なっておりません。"),t("br"),this._v("\n        ※１ヶ月プランに変更希望の場合は、３ヶ月更新日前に有料会員を退会いただき"),t("br"),this._v("\n        再度１ヶ月プランでお申し込みいただく必要がございます。もう一度有料プランをお申込みいただければ会員情報・メッセージ履歴・お気に入り登録などは消えませんのでご安心ください。\n      ")])},function(){var n=this.$createElement,t=this._self._c||n;return t("div",{staticClass:"form__row"},[t("label",[this._v("\n        カード名義人\n      ")]),this._v(" "),t("p",[t("input",{attrs:{id:"card-holder-name",type:"text"}})])])}],!1,null,"2b79e199",null);t.default=p.exports}}]);